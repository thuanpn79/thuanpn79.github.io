!function(){"use strict";function e(e){e.when("/",{redirectTo:"/customers"}).when("/joblist",{redirectTo:"/jobList"}).otherwise({redirectTo:"/"})}function t(e,t,o,n,i){e.$on("$locationChangeStart",function(e,t,o){}),e.$on("$routeChangeSuccess",function(){e.currentPage=o.path().substring(1),t.current&&t.current.hideHeader?e.hideHeader=!0:e.hideHeader=!1,t.current.title?document.title="ST Logistics - "+t.current.title:document.title="ST Logistics"})}angular.module("main.module",["ngAnimate","ngRoute","ngCookies","ngTouch","ngSanitize","hljs","ui.bootstrap","ui.bootstrap.datetimepicker","customer.module","sp.admin.user.module","account.module","jobList.module","angularjs-dropdown-multiselect"]).run(t).config(e),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$route","$location","authService","systemRole"]}(),function(){"use strict";angular.module("main.module").constant("systemRole",{Anonymous:"Anonymous",Customer:1,Admin:2,SuperAdmin:3}).constant("setItemPerPage",[{value:10,text:"10 entities"},{value:20,text:"20 entities"},{value:50,text:"50 entities"},{value:100,text:"100 entities"}]).constant("pageName",{TRANSACTIONS:"transactions",USERS:"users",CLIENTS:"customers",JOBTYPES:"jobtypes",LOCATIONS:"locations",REPORTS:"reports"})}(),function(){"use strict";function e(e){e.when("/customers",{title:"Customer",controller:"CustomerController",templateUrl:"app/components/customer/customers.html",controllerAs:"vm",authorize:"Admin"}).when("/customers/create",{title:"Create new client",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:"Admin"}).when("/example",{title:"example",controller:"ExampleController",templateUrl:"app/components/customer/example.html",controllerAs:"vm",authorize:"Admin",hideHeader:!0})}function t(e,t){function o(){n()}function n(){r.gridConfig={columnIdentity:"id",navigationDetail:"/customers/detail/",columns:[{name:"sapCode",display:"SAP Code",css:"col-md-4"},{name:"organizationCode",display:"Organization Code"},{name:"organizationName",display:"Organization Name"},{name:"clientType",display:"ClientType"},{name:"address",display:"Address"}]},i()}function i(){r.isGridLoading=!0,e(function(){r.data=[];for(var e=0;e<10;e++)r.data.push({sapCode:"AL05",organizationCode:"ICA",organizationName:"Costal Command",clientType:"Heathcare",address:"31 Minara Costal Drive Singapore 157198571591"});r.options.totalItems=175,r.isGridLoading=!1},1e3)}var r=this;r.getCustomerByCriteria=i,o()}function o(e){function t(){var t={setAdhocPricing:o};e.createPopup({templateUrl:"app/components/customer/adhocPricing.html",size:"lg",data:r.pssAdhocPricing},t)}function o(){r.clientDetail.adhocPricing="$100",r.clientDetail.adhocExpresPricing="$200"}function n(){var t={addNewUser:i};e.createPopup({templateUrl:"app/components/customer/userDetail.html",size:"lg",data:r.newUser},t)}function i(){r.clientDetail.users.push({name:r.newUser.firstName+" "+r.newUser.lastName,email:r.newUser.email,contactNo:r.newUser.mobileNumber,officeAddress:r.newUser.workAddress.postalCode+" "+r.newUser.workAddress.bIkNo+" "+r.newUser.workAddress.streetName+" "+r.newUser.workAddress.unitNo,billingAddress:r.newUser.billingAddress.postalCode+" "+r.newUser.billingAddress.bIkNo+" "+r.newUser.billingAddress.streetName+" "+r.newUser.billingAddress.unitNo,orgCode:"ICA",costCentre:r.newUser.costCenter}),r.newUser={}}var r=this;r.setAdhocPricing=t,r.addNewUser=n,r.clientDetail={users:[]},r.pssAdhocPricing={},r.newUser={},r.myTime=new Date;for(var a=0;a<2;a++)r.clientDetail.users.push({name:"May thae Khaingfajlfkajl",email:"may.thaekhaing@2359media.com",contactNo:901213213,officeAddress:"Bik 31 Marine Parade Street 29, #10-23 S66",billingAddress:"Bik 31 Marine Parade Street 29, #10-23 S66",orgCode:"ICA",costCentre:"Cost centre 1"})}function n(e,t){var o=this;o.data=[];for(var n=0;n<100;n++)o.data.push({firstName:"Fist Name "+n,lastName:"Last Name1"});o.getLocation=function(n){var i=t.defer();return e(function(){var e=o.data.filter(function(e){return e.firstName.indexOf(n)>=0});i.resolve(e)},2e3),i.promise},o.onSelect=function(e){alert(e),console.log(e)}}angular.module("customer.module",["ngRoute"]).config(e).controller("CustomerController",t).controller("CustomerDetailController",o).controller("ExampleController",n),e.$inject=["$routeProvider"],t.$inject=["$timeout","$uibModal"],o.$inject=["modalService"],n.$inject=["$timeout","$q"]}(),function(){"use strict";function e(e){e.when("/users",{title:"User management",controller:"SpAdminUserController",templateUrl:"app/components/spAdminUser/users.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/create",{title:"New admin",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/detail/:id",{title:"Admin detail",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"})}function t(e){function t(){o()}function o(){i.gridConfig={columnIdentity:"id",navigationDetail:"/users/detail/",columns:[{name:"name",display:"Name"},{name:"email",display:"Email"},{name:"contactNumber",display:"Contact number"},{name:"department",display:"Department"}]},n()}function n(){i.isGridLoading=!0,e(function(){i.data=[];for(var e=0;e<10;e++)i.data.push({id:e,name:"ABC",email:"nguyeminhtien@gmail.com",contactNumber:"168431321",department:"PSS"});i.options.totalItems=175,i.isGridLoading=!1},1e3)}var i=this;i.getUserByCriteria=n,t()}function o(e){function t(){var t=e.id;t?(i.userDetail={id:123,firstName:"Tien",lastName:"Nguyen Minh",email:"nguyenminhtiend@gmail.com",contactNumber:98743473443,department:"PSS"},i.viewMode=!0):i.viewMode=!1}function o(){i.viewMode=!1}function n(){i.viewMode=!0}var i=this;i.edit=o,i.save=n,t()}angular.module("sp.admin.user.module",["ngRoute"]).config(e).controller("SpAdminUserController",t).controller("SpAdminUserDetailController",o),e.$inject=["$routeProvider"],t.$inject=["$timeout"],o.$inject=["$routeParams"]}(),function(){"use strict";function e(e){e.when("/login",{title:"Login",controller:"AccountController",templateUrl:"app/components/account/login.html",controllerAs:"vm",hideHeader:!0}).when("/account/forgot",{title:"Forgot password",controller:"AccountController",templateUrl:"app/components/account/forgot.html",controllerAs:"vm",hideHeader:!0}).when("/account/activate",{title:"Activate account",controller:"AccountController",templateUrl:"app/components/account/activate.html",controllerAs:"vm",hideHeader:!0})}function t(e,t){function o(){e.login("","")&&t.path("/customer")}function n(){t.path("/login")}function i(){r.isSentResetPassword=!0}var r=this;r.login=o,r.activateAccount=n,r.resetPassword=i}angular.module("account.module",["ngRoute"]).config(e).controller("AccountController",t),e.$inject=["$routeProvider"],t.$inject=["authService","$location"]}(),function(){"use strict";function e(e){e.when("/jobList",{title:"jobList",controller:"JobListController",templateUrl:"app/components/jobList/jobList.html",controllerAs:"vm",authorize:"SuperAdmin"})}function t(e,t){function o(){m.fromDate=new Date,m.toDate=new Date,m.requestButton="All",m.statusButton="All",m.customerButton="All",r(),s(),c(),d("Adhoc"),n()}function n(){m.gridConfig={columnIdentity:"id",navigationDetail:"/customers/detail/",columns:[{name:"collectionBarcode",display:"Collection barcode"},{name:"customer",display:"Customer"},{name:"createdDate",display:"Created date"},{name:"requestType",display:"Request type"},{name:"reqStatus",display:"Req status"},{name:"status",display:"Status"},{name:"pickupPoint",display:"Pick up point"},{name:"deliveryPoint",display:"Delivery point"}]},i()}function i(){m.isGridLoading=!0,e(function(){m.data=[];for(var e=0;e<10;e++)m.data.push({collectionBarcode:"C543645E411NE",customer:"ICA-Costal Command",createdDate:"27/01/2016 08:09:03",requestType:"Normal Service",reqStatus:"Waiting",status:"N/A",pickupPoint:"10 Brani Way Singapore",deliveryPoint:"31 Marina Coastal Drive Singapore 175384"});m.optionsGrid.totalItems=175,m.isGridLoading=!1},2e3)}function r(){m.requestTypes=["All","Normal service 1","Normal service 2","Normal service 3"]}function a(e){m.requestButton=e}function s(){m.statusList=["All","Picking up","Collected","N/A"]}function l(e){m.statusButton=e}function c(){m.customerList=["All","ICA-Costal Command 1","ICA-Costal Command 2","ICA-Costal Command 3"]}function u(e){m.customerButton=e}function d(e){"Adhoc"==e?(m.modelClassAdhoc="btn btn-default btn-block btn-action active",m.modelClassMilkRun="btn btn-default btn-block btn-additional"):(m.modelClassAdhoc="btn btn-default btn-block btn-additional",m.modelClassMilkRun="btn btn-default btn-block btn-action active")}var m=this;m.getTransactionByCriteria=i,m.requestTypes=[],m.getRequestTypes=r,m.change=a,m.statusList=[],m.getStatusList=s,m.changeStatus=l,m.customerList=[],m.getCustomerList=c,m.changeCustomer=u,m.getTransactions=d,o()}angular.module("jobList.module",["ngRoute"]).config(e).controller("JobListController",t),e.$inject=["$routeProvider"],t.$inject=["$timeout","$uibModal"]}(),function(){"use strict";function e(e,t){function o(){return!!e.getObject("currentUser")}function n(o){var n=e.getObject("currentUser");return!!(n&&t[n.role]>=t[o])}function i(t,o){return e.putObject("currentUser",{token:"abc",role:"SuperAdmin"}),!0}var r={isAuthenticated:o,isAuthorized:n,login:i};return r}angular.module("main.module").factory("authService",e),e.$inject=["$cookies","systemRole"]}(),function(){"use strict";function e(e){function t(t,o,n){var i=e.open({animation:!0,templateUrl:t.templateUrl,controller:"ModalInstanceCtrl",controllerAs:"vm",size:t.size,resolve:{data:function(){return t.data}}});i.result.then(function(e){o[e]()},n)}var o={createPopup:t};return o}angular.module("main.module").factory("modalService",e),e.$inject=["$uibModal"]}(),function(){"use strict";function e(e,t){function o(e){i.options.sortColumn===e?i.options.sortAscending=!i.options.sortAscending:(i.options.sortAscending=!0,i.options.sortColumn=e),i.actionRequest()}function n(e){t.path(i.gridConfig.navigationDetail+e)}var i=this;i.setItemPerPage=e,i.options={sortColumn:"",sortAscending:!0,itemPerPage:20},i.sort=o,i.navigateToDetail=n}angular.module("main.module").directive("grid",function(){return{restrict:"E",scope:{gridConfig:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/grid/grid.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage","$location"]}(),function(){"use strict";function e(e,t){function o(e){i.optionsGrid.sortColumn===e?i.optionsGrid.sortAscending=!i.optionsGrid.sortAscending:(i.optionsGrid.sortAscending=!0,i.optionsGrid.sortColumn=e),i.actionRequest()}function n(e){t.path(i.gridConfig.navigationDetail+e)}var i=this;i.setItemPerPage=e,i.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20},i.sort=o,i.navigateToDetail=n,i.columnModel=[],i.columnsData=[{id:1,label:"Collection barcode"},{id:2,label:"Customer"},{id:3,label:"Created date"},{id:4,label:"Request type"},{id:5,label:"Request status"},{id:6,label:"Status"},{id:7,label:"Pick up point"},{id:8,label:"Delivery point"}],i.defaultText={buttonDefaultText:"Default"}}angular.module("main.module").directive("gridExt",function(){return{restrict:"E",scope:{gridConfig:"=",optionsGrid:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/gridExt/gridExt.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage","$location"]}(),function(){"use strict";function e(e,t){var o=this;o.data=t,o.ok=function(t){e.close(t)},o.cancel=function(){e.dismiss("cancel")}}angular.module("main.module").controller("ModalInstanceCtrl",e),e.$inject=["$uibModalInstance","data"]}(),function(){"use strict";function e(e,t){function o(){e.path("/login")}var n=this;n.pageName=t,n.logout=o}angular.module("main.module").directive("headerPage",function(){return{restrict:"E",templateUrl:"app/directives/header/header.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$location","pageName"]}(),function(){"use strict";angular.module("main.module").directive("compareTo",function(){return{restrict:"A",require:"ngModel",scope:{compareTo:"=compareTo"},link:function(e,t,o,n){t.bind("keyup",function(){e.$apply(function(){var o=t.val(),i=e.compareTo,r=o&&o===i;n.$setValidity("compareTo",r)})})}}})}(),function(){"use strict";function e(){var e=this;e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customDatePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/datePicker/datePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){var e=this;e.timepickerOptions={showMeridian:!1},e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customTimePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/timePicker/timePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){function e(e){return[{postalCode:"Postal Code 1",bIkNo:"70"},{postalCode:"Postal Code 2",bIkNo:"80"},{postalCode:"Postal Code 3",bIkNo:"70"}]}function t(e){return[{streetName:"Anson Road 1",unitNo:"#24-01"},{streetName:"Anson Road 2",unitNo:"#24-01"},{streetName:"Anson Road 3",unitNo:"#24-01"}]}function o(e){l.userDetail.workAddress.postalCode=e.postalCode,l.userDetail.workAddress.bIkNo=e.bIkNo}function n(e){l.userDetail.workAddress.streetName=e.streetName,l.userDetail.workAddress.unitNo=e.unitNo}function i(e){return[{postalCode:"Postal Code 1",bIkNo:"70"},{postalCode:"Postal Code 2",bIkNo:"80"},{postalCode:"Postal Code 3",bIkNo:"70"}]}function r(e){return[{streetName:"Anson Road 1",unitNo:"#24-01"},{streetName:"Anson Road 2",unitNo:"#24-01"},{streetName:"Anson Road 3",unitNo:"#24-01"}]}function a(e){l.userDetail.billingAddress.postalCode=e.postalCode,l.userDetail.billingAddress.bIkNo=e.bIkNo}function s(e){l.userDetail.billingAddress.streetName=e.streetName,l.userDetail.billingAddress.unitNo=e.unitNo}var l=this;l.searchWorkAddressByPostalCode=e,l.searchWorkingAddressByStreetName=t,l.onSelectPostalWorkAddress=o,l.onSelectStreetNameWorkingAddress=n,l.searchBillingAddressByPostalCode=i,l.searchBillingAddressByStreetName=r,l.onSelectPostalBillingAddress=a,l.onSelectStreetNameBillingAddress=s}angular.module("main.module").directive("userClientDetail",function(){return{restrict:"E",scope:{userDetail:"=",onCreate:"&",onCancel:"&"},templateUrl:"app/directives/userClient/userClientDetail.html",controller:e,controllerAs:"vm",bindToController:!0}})}();