!function(){"use strict";function e(e){e.when("/",{redirectTo:"/customers"}).when("/joblist",{redirectTo:"/jobList"}).otherwise({redirectTo:"/"})}function t(e,t,o,n,r){var i=n.getCurrentUser();i?e.currentUser=i:o.path("/login"),e.$on("$locationChangeStart",function(e,r,i){var a=o.path(),s=t.routes[a];if(s&&s.authorize)return n.isAuthenticated()?void(n.isAuthorized(s.authorize)||o.path("/login")):void o.path("/login")}),e.$on("$routeChangeSuccess",function(){t.current&&(e.hideHeader=t.current.hideHeader,e.category=t.current.category),t.current.title?document.title="ST Logistics - "+t.current.title:document.title="ST Logistics"})}angular.module("main.module",["ngAnimate","ngRoute","ngCookies","ngTouch","ngSanitize","angularjs-dropdown-multiselect","hljs","ui.bootstrap","LocalStorageModule","ui.bootstrap.datetimepicker","customer.module","spAdminUser.module","adminUser.module","account.module","jobList.module"]).run(t).config(e),e.$inject=["$routeProvider"],t.$inject=["$rootScope","$route","$location","authService","systemRole"]}(),function(){"use strict";angular.module("main.module").constant("systemRole",{Customer:1,Admin:2,SuperAdmin:3}).constant("setItemPerPage",[{value:10,text:"10 entities"},{value:20,text:"20 entities"},{value:50,text:"50 entities"},{value:100,text:"100 entities"}]).constant("pageName",{TRANSACTIONS:"transactions",USERS:"Users",CLIENTS:"Customers",JOBTYPES:"jobtypes",LOCATIONS:"locations",REPORTS:"reports"}).constant("departments",{PSS:"PSS",HealthCare:"HealthCare"})}(),function(){"use strict";function e(e){e.when("/customers",{title:"Client Management",category:"Customers",controller:"CustomerController",templateUrl:"app/components/customer/customers.html",controllerAs:"vm",authorize:"Admin"}).when("/customers/create",{title:"Create new client",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:"Admin"}).when("/customers/detail/:id",{title:"Client detail",category:"Customers",controller:"CustomerDetailController",templateUrl:"app/components/customer/detail.html",controllerAs:"vm",authorize:"Admin"}).when("/example",{title:"example",controller:"ExampleController",templateUrl:"app/components/customer/example.html",controllerAs:"vm",authorize:"Admin",hideHeader:!0})}function t(e,t){function o(){n()}function n(){a.gridConfig={onClickRowDetail:i,columns:[{name:"sapCode",display:"SAP Code"},{name:"organizationCode",display:"Organization Code"},{name:"organizationName",display:"Organization Name"},{name:"clientType",display:"ClientType"},{name:"address",display:"Address"}]},r()}function r(){a.isGridLoading=!0,e(function(){a.data=[];for(var e=0;e<10;e++)a.data.push({id:e,sapCode:"AL05",organizationCode:"ICA",organizationName:"Costal Command",clientType:"Heathcare",address:"31 Minara Costal Drive Singapore 157198571591"});a.options.totalItems=175,a.isGridLoading=!1},1e3)}function i(e){t.path("/customers/detail/"+e.id)}var a=this;a.getCustomerByCriteria=r,o()}function o(e,t,o,n,r){function i(){var o=t.id;o?(g.clientDetail={id:o,clientName:"Nguyen Minh Tien",clientType:"PSS",sapCode:"AL06",organizationCode:"ICA",clientAddress:{postalCode:"123",bIkNo:"ABC",streetName:"Ansons Road 33",unitNo:"#235-53"},contactPerson:"Jane",contactNumber:98743473443,endDateOfContract:new Date(2018,10,26),users:[],sameDayDelivery:new Date(2018,10,26,10,30),nextDayDelivery:new Date(2018,10,26,20,45),services:{milkRun:{isUsed:!1},adhoc:{isUsed:!0,price:"$100"},adhocExpres:{isUsed:!0,price:"$200"}}},g.viewMode=!0):(g.clientDetail={services:{},users:[]},g.viewMode=!1),g.clientDetail.clientType=e.currentUser.department;for(var n=0;n<2;n++)g.clientDetail.users.push({name:"May thae Khaingfajlfkajl",email:"may.thaekhaing@2359media.com",contactNo:901213213,officeAddress:"Bik 31 Marine Parade Street 29, #10-23 S66",billingAddress:"Bik 31 Marine Parade Street 29, #10-23 S66",orgCode:"ICA",costCentre:"Cost centre 1"})}function a(){o.path("/customers")}function s(){e.currentUser.department===r.PSS?l():c()}function l(){var e={setPSSAdhocPricing:d};n.createPopup({templateUrl:"app/components/customer/pssAdhocPricing.html",size:"lg",data:g.pssAdhocPricing},e)}function c(){var e={setHealthCareAdhocPricing:u};n.createPopup({templateUrl:"app/components/customer/healthCareAdhocPricing.html",size:"lg",data:g.pssAdhocPricing},e)}function d(){g.clientDetail.services.adhoc={isUsed:!0,price:"$300"},g.clientDetail.services.adhocExpres={isUsed:!0,price:"$400"}}function u(){g.clientDetail.services.adhoc={isUsed:!0,price:"$500"},g.clientDetail.services.adhocExpres={isUsed:!0,price:"$600"}}function m(){var e={addNewUser:p};n.createPopup({templateUrl:"app/components/customer/userDetail.html",size:"lg",data:g.newUser},e)}function p(){g.clientDetail.users.push({name:g.newUser.firstName+" "+g.newUser.lastName,email:g.newUser.email,contactNo:g.newUser.mobileNumber,officeAddress:g.newUser.workAddress.postalCode+" "+g.newUser.workAddress.bIkNo+" "+g.newUser.workAddress.streetName+" "+g.newUser.workAddress.unitNo,billingAddress:g.newUser.billingAddress.postalCode+" "+g.newUser.billingAddress.bIkNo+" "+g.newUser.billingAddress.streetName+" "+g.newUser.billingAddress.unitNo,orgCode:"ICA",costCentre:g.newUser.costCenter}),g.newUser={}}var g=this;g.setAdhocPricing=s,g.addNewUser=m,g.saveCustomer=a,g.pssAdhocPricing={},g.healthCareAdhocPricing={},g.newUser={},i()}function n(e,t){var o=this;o.data=[];for(var n=0;n<100;n++)o.data.push({firstName:"Fist Name "+n,lastName:"Last Name1"});o.getLocation=function(n){var r=t.defer();return e(function(){var e=o.data.filter(function(e){return e.firstName.indexOf(n)>=0});r.resolve(e)},2e3),r.promise},o.onSelect=function(e){alert(e),console.log(e)}}angular.module("customer.module",["ngRoute"]).config(e).controller("CustomerController",t).controller("CustomerDetailController",o).controller("ExampleController",n),e.$inject=["$routeProvider"],t.$inject=["$timeout","$location"],o.$inject=["$rootScope","$routeParams","$location","modalService","departments"],n.$inject=["$timeout","$q"]}(),function(){"use strict";function e(e){e.when("/users",{title:"User management",category:"Users",controller:"SpAdminUserController",templateUrl:"app/components/spAdminUser/users.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/create",{title:"New admin",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/users/detail/:id",{title:"Admin detail",category:"Users",controller:"SpAdminUserDetailController",templateUrl:"app/components/spAdminUser/detail.html",controllerAs:"vm",authorize:"SuperAdmin"})}function t(e,t){function o(){n()}function n(){a.gridConfig={onClickRowDetail:i,columns:[{name:"name",display:"Name"},{name:"email",display:"Email"},{name:"contactNumber",display:"Contact number"},{name:"department",display:"Department"}]},r()}function r(){a.isGridLoading=!0,e(function(){a.data=[];for(var e=0;e<10;e++)a.data.push({id:e,name:"ABC",email:"nguyeminhtien@gmail.com",contactNumber:"168431321",department:"PSS"});a.options.totalItems=175,a.isGridLoading=!1},1e3)}function i(e){t.path("/users/detail/"+e.id)}var a=this;a.getUserByCriteria=r,o()}function o(e,t){function o(){var t=e.id;t?(i.userDetail={id:123,firstName:"Tien",lastName:"Nguyen Minh",email:"nguyenminhtiend@gmail.com",contactNumber:98743473443,department:"PSS"},i.viewMode=!0):i.viewMode=!1}function n(){i.viewMode=!1}function r(){t.path("/users")}var i=this;i.edit=n,i.save=r,o()}angular.module("spAdminUser.module",["ngRoute"]).config(e).controller("SpAdminUserController",t).controller("SpAdminUserDetailController",o),e.$inject=["$routeProvider"],t.$inject=["$timeout","$location"],o.$inject=["$routeParams","$location"]}(),function(){"use strict";function e(e){e.when("/login",{title:"Login",controller:"AccountController",templateUrl:"app/components/account/login.html",controllerAs:"vm",hideHeader:!0}).when("/account/forgot",{title:"Forgot password",controller:"AccountController",templateUrl:"app/components/account/forgot.html",controllerAs:"vm",hideHeader:!0}).when("/account/activate",{title:"Activate account",controller:"AccountController",templateUrl:"app/components/account/activate.html",controllerAs:"vm",hideHeader:!0})}function t(e,t,o){function n(){t.login(s.email,s.password)?a():s.wrongPassword=!0}function r(){o.path("/login")}function i(){s.isSentResetPassword=!0}function a(){e.currentUser=t.getCurrentUser(),o.path("/customers")}var s=this;s.login=n,s.activateAccount=r,s.resetPassword=i}angular.module("account.module",["ngRoute"]).config(e).controller("AccountController",t),e.$inject=["$routeProvider"],t.$inject=["$rootScope","authService","$location"]}(),function(){"use strict";function e(e){e.when("/jobList",{title:"jobList",controller:"JobListController",templateUrl:"app/components/jobList/jobList.html",controllerAs:"vm",authorize:"SuperAdmin"}).when("/jobList/create",{title:"New Adhoc job",category:"Adhoc",controller:"JobAdhocNewController",templateUrl:"app/components/jobList/jobAdhocNew.html",controllerAs:"vm",authorize:"Admin"})}function t(e,t){function o(){m.fromDate=new Date,m.toDate=new Date,m.requestButton="All",m.statusButton="All",m.customerButton="All",i(),s(),c(),u("Adhoc"),n()}function n(){m.gridConfig={columnIdentity:"id",navigationDetail:"/jobList/jobAdhocNew.html/",columns:[{name:"collectionBarcode",display:"Collection barcode",id:1},{name:"customer",display:"Customer",id:2},{name:"createdDate",display:"Created date",id:3},{name:"requestType",display:"Request type",id:4},{name:"reqStatus",display:"Req status",id:5},{name:"status",display:"Status",id:6},{name:"pickupPoint",display:"Pick up point",id:7},{name:"deliveryPoint",display:"Delivery point",id:8}]},r()}function r(){m.isGridLoading=!0,e(function(){m.data=[];for(var e=0;e<10;e++)m.data.push({collectionBarcode:"C543645E411NE",customer:"ICA-Costal Command",createdDate:"27/01/2016 08:09:03",requestType:"Normal Service",reqStatus:"Waiting",status:"N/A",pickupPoint:"10 Brani Way Singapore",deliveryPoint:"31 Marina Coastal Drive Singapore 175384"});m.optionsGrid.totalItems=175,m.isGridLoading=!1},2e3)}function i(){m.requestTypes=["All","Normal service 1","Normal service 2","Normal service 3"]}function a(e){m.requestButton=e}function s(){m.statusList=["All","Picking up","Collected","N/A"]}function l(e){m.statusButton=e}function c(){m.customerList=["All","ICA-Costal Command 1","ICA-Costal Command 2","ICA-Costal Command 3"]}function d(e){m.customerButton=e}function u(e){"Adhoc"===e?(m.modelClassAdhoc="btn btn-default btn-block btn-action active",m.modelClassMilkRun="btn btn-default btn-block btn-additional"):(m.modelClassAdhoc="btn btn-default btn-block btn-additional",m.modelClassMilkRun="btn btn-default btn-block btn-action active")}var m=this;m.getTransactionByCriteria=r,m.requestTypes=[],m.getRequestTypes=i,m.change=a,m.statusList=[],m.getStatusList=s,m.changeStatus=l,m.customerList=[],m.getCustomerList=c,m.changeCustomer=d,m.getTransactions=u,o()}function o(e,t){function o(){n.viewMode=!0}var n=this;o()}angular.module("jobList.module",["ngRoute"]).config(e).controller("JobListController",t).controller("JobAdhocNewController",o),e.$inject=["$routeProvider"],t.$inject=["$timeout","$uibModal"],o.$inject=["$timeout","$uibModal"]}(),function(){"use strict";function e(e){e.when("/clientUsers",{title:"User Client management",category:"Users",controller:"AdminUserController",templateUrl:"app/components/adminUser/clientUsers.html",controllerAs:"vm",authorize:"Admin"})}function t(e,t){function o(){n()}function n(){d.gridConfig={onClickRowDetail:s,columns:[{name:"name",display:"Name",css:"col-md-1"},{name:"email",display:"Email",css:"col-md-2"},{name:"contactNo",display:"Contact no",css:"col-md-2"},{name:"officeAddress",display:"Office address",css:"col-md-2"},{name:"billingAddress",display:"Billing address",css:"col-md-2"},{name:"orgCode",display:"Org code",css:"col-md-1"},{name:"costCentre",display:"Cost centre",css:"col-md-2"}]},r()}function r(){d.isGridLoading=!0,e(function(){d.data=[];for(var e=0;e<10;e++)d.data.push({id:e,name:"Sebastien",email:"nguyeminhtien@gmail.com",contactNo:"96444123",officeAddress:"BIk 31 Martine Parade Street 29, #20-23 S6613426",billingAddress:"BIk 31 Martine Parade Street 29, #20-23 S6613426",orgCode:"ICA",costCentre:"Cost centre "+e});d.options.totalItems=175,d.isGridLoading=!1},1e3)}function i(){d.userDetail={};var e={addNewUser:a};l(e)}function a(){d.data.push({name:d.userDetail.firstName+" "+d.userDetail.lastName,email:d.userDetail.email,contactNo:d.userDetail.mobileNumber,officeAddress:d.userDetail.workAddress.postalCode+" "+d.userDetail.workAddress.bIkNo+" "+d.userDetail.workAddress.streetName+" "+d.userDetail.workAddress.unitNo,billingAddress:d.userDetail.billingAddress.postalCode+" "+d.userDetail.billingAddress.bIkNo+" "+d.userDetail.billingAddress.streetName+" "+d.userDetail.billingAddress.unitNo,orgCode:"ICA",costCentre:d.userDetail.costCenter})}function s(e){d.userDetail={id:2,firstName:"Tien",lastName:"Nguyen Minh",email:"nguyeminhtien@gmail.com",mobileNumber:96444123,workAddress:{postalCode:"Postal Code 1",bIkNo:"BIk 31",streetName:"Martine Parade Street 29",unitNo:"#20-23 S6613426"},billingAddress:{postalCode:"Postal Code 1",bIkNo:"BIk 31",streetName:"Martine Parade Street 29",unitNo:"#20-23 S6613426"},orgCode:"ICA",costCenter:"Cost centre 3"};var t={updateUser:c};l(t)}function l(e){t.createPopup({templateUrl:"app/components/customer/userDetail.html",size:"lg",data:d.userDetail},e)}function c(){alert("messi")}var d=this;d.userDetail={},d.getUserByCriteria=r,d.addNewUser=i,o()}angular.module("adminUser.module",["ngRoute"]).config(e).controller("AdminUserController",t),e.$inject=["$routeProvider"],t.$inject=["$timeout","modalService"]}(),function(){"use strict";function e(e,t,o){function n(){return!!s()}function r(e){var o=s();return!!(o&&t[o.role]>=t[e])}function i(t,n){var r=null;return"SuperAdmin"===t&&"111111"===n&&(r={token:"52306djlskfg290352laskdj902357u",name:"Super Admin",role:"SuperAdmin"}),"PSSAdmin"===t&&"111111"===n&&(r={token:"52306djlskfg290352laskdj902357u",name:"PSS Admin",role:"Admin",department:o.PSS}),"HealthCareAdmin"===t&&"111111"===n&&(r={token:"52306djlskfg290352laskdj902357u",name:"HealthCare Admin",role:"Admin",department:o.HealthCare}),!!r&&(e.set("currentUser",r),!0)}function a(){e.remove("currentUser")}function s(){return e.get("currentUser")}var l={isAuthenticated:n,isAuthorized:r,login:i,logout:a,getCurrentUser:s};return l}angular.module("main.module").factory("authService",e),e.$inject=["localStorageService","systemRole","departments"]}(),function(){"use strict";function e(e){function t(t,o,n){var r=e.open({animation:!0,templateUrl:t.templateUrl,controller:"ModalInstanceCtrl",controllerAs:"vm",size:t.size,backdrop:"static",resolve:{data:function(){return t.data}}});r.result.then(function(e){o[e]()},n)}var o={createPopup:t};return o}angular.module("main.module").factory("modalService",e),e.$inject=["$uibModal"]}(),function(){"use strict";function e(e){function t(e){o.options.sortColumn===e?o.options.sortAscending=!o.options.sortAscending:(o.options.sortAscending=!0,o.options.sortColumn=e),o.actionRequest()}var o=this;o.setItemPerPage=e,o.options={sortColumn:"",sortAscending:!0,itemPerPage:20},o.sort=t}angular.module("main.module").directive("grid",function(){return{restrict:"E",scope:{gridConfig:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/grid/grid.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage"]}(),function(){"use strict";function e(e,t){function o(e){l.optionsGrid.sortColumn===e?l.optionsGrid.sortAscending=!l.optionsGrid.sortAscending:(l.optionsGrid.sortAscending=!0,l.optionsGrid.sortColumn=e),l.actionRequest()}function n(e){t.path(l.gridConfig.navigationDetail+e)}function r(e){console.log("select > "+e.id),a(e.id)}function i(e){console.log("deselect : "+e.id),s(e.id)}function a(e){switch(e){case 1:l.column1=!0;break;case 2:l.column2=!0;break;case 3:l.column3=!0;break;case 4:l.column4=!0;break;case 5:l.column5=!0;break;case 6:l.column6=!0;break;case 7:l.column7=!0;break;case 8:l.column8=!0}}function s(e){switch(e){case 1:l.column1=!1;break;case 2:l.column2=!1;break;case 3:l.column3=!1;break;case 4:l.column4=!1;break;case 5:l.column5=!1;break;case 6:l.column6=!1;break;case 7:l.column7=!1;break;case 8:l.column8=!1}}var l=this;l.setItemPerPage=e,l.optionsGrid={sortColumn:"",sortAscending:!0,itemPerPage:20},l.sort=o,l.navigateToDetail=n,l.columnModel=[],l.columnsData=[{id:1,label:"Collection barcode"},{id:2,label:"Customer"},{id:3,label:"Created date"},{id:4,label:"Request type"},{id:5,label:"Request status"},{id:6,label:"Status"},{id:7,label:"Pick up point"},{id:8,label:"Delivery point"}],l.defaultText={buttonDefaultText:"Default"},l.column1=!0,l.column2=!0,l.column3=!0,l.column4=!0,l.column5=!0,l.column6=!0,l.column7=!0,l.column8=!0,l.columnModel=[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8}],l.eventListeners={onItemSelect:r,onItemDeselect:i}}angular.module("main.module").directive("gridExt",function(){return{restrict:"E",scope:{gridConfig:"=",optionsGrid:"=",options:"=",data:"=",actionRequest:"&",isLoading:"="},templateUrl:"app/directives/commonControls/gridExt/gridExt.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["setItemPerPage","$location"]}(),function(){"use strict";function e(e,t){var o=this;o.data=t,o.ok=function(t){e.close(t)},o.cancel=function(){e.dismiss("cancel")}}angular.module("main.module").controller("ModalInstanceCtrl",e),e.$inject=["$uibModalInstance","data"]}(),function(){"use strict";function e(e,t,o,n){function r(){o.logout(),e.currentUser=null,t.path("/login")}var i=this;i.pageName=n,i.logout=r}angular.module("main.module").directive("headerPage",function(){return{restrict:"E",templateUrl:"app/directives/header/header.html",controller:e,controllerAs:"vm",bindToController:!0}}),e.$inject=["$rootScope","$location","authService","pageName"]}(),function(){"use strict";angular.module("main.module").directive("compareTo",function(){return{restrict:"A",require:"ngModel",scope:{compareTo:"=compareTo"},link:function(e,t,o,n){t.bind("keyup",function(){e.$apply(function(){var o=t.val(),r=e.compareTo,i=o&&o===r;n.$setValidity("compareTo",i)})})}}})}(),function(){"use strict";function e(){var e=this;e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customDatePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/datePicker/datePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){var e=this;e.timepickerOptions={showMeridian:!1},e.isOpen=!1,e.openCalendar=function(t){t.preventDefault(),t.stopPropagation(),e.isOpen=!0}}angular.module("main.module").directive("customTimePicker",function(){return{restrict:"E",scope:{ngModel:"="},templateUrl:"app/directives/commonControls/timePicker/timePicker.html",controller:e,controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function e(){function e(e){return[{postalCode:"Postal Code 1",bIkNo:"70",streetName:"Anson Road 1"},{postalCode:"Postal Code 2",bIkNo:"80",streetName:"Anson Road 2"},{postalCode:"Postal Code 3",bIkNo:"70",streetName:"Anson Road 3"}]}function t(e){r.userDetail.workAddress.postalCode=e.postalCode,r.userDetail.workAddress.bIkNo=e.bIkNo,r.userDetail.workAddress.streetName=e.streetName}function o(e){return[{postalCode:"Postal Code 1",bIkNo:"70",streetName:"Anson Road 1"},{postalCode:"Postal Code 2",bIkNo:"80",streetName:"Anson Road 2"},{postalCode:"Postal Code 3",bIkNo:"70",streetName:"Anson Road 3"}]}function n(e){r.userDetail.billingAddress.postalCode=e.postalCode,r.userDetail.billingAddress.bIkNo=e.bIkNo,r.userDetail.billingAddress.streetName=e.streetName}var r=this;r.searchWorkAddressByPostalCode=e,r.onSelectPostalWorkAddress=t,r.searchBillingAddressByPostalCode=o,r.onSelectPostalBillingAddress=n}angular.module("main.module").directive("userClientDetail",function(){return{restrict:"E",scope:{userDetail:"=",onCreate:"&",onCancel:"&"},templateUrl:"app/directives/userClient/userClientDetail.html",controller:e,controllerAs:"vm",bindToController:!0}})}();